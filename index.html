<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Duggyffstore - Demo</title>
  <style>
    :root{--bg:#071124;--card:#071827;--accent:#06b6d4;--muted:#94a3b8}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,var(--bg),#02101a);color:#e6eef6;min-height:100vh}
    header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px}
    .brand{font-weight:800}/* right-top hamburger with three lines */
.hamburger{width:44px;height:44px;border-radius:8px;background:rgba(255,255,255,0.03);display:flex;align-items:center;justify-content:center;cursor:pointer;position:relative}
.lines{display:flex;flex-direction:column;gap:5px}
.lines span{display:block;width:20px;height:3px;background:var(--accent);border-radius:3px}

/* small popup when hamburger clicked */
.menu-popup{position:absolute;right:0;top:56px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:10px;border-radius:8px;box-shadow:0 8px 24px rgba(2,6,23,0.6);min-width:160px;display:none}
.menu-popup a{display:block;padding:8px;border-radius:6px;text-decoration:none;color:inherit}
.menu-popup a:hover{background:rgba(255,255,255,0.02)}

main{max-width:980px;margin:22px auto;padding:12px}
.card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:12px;padding:16px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}

.muted{color:var(--muted);font-size:13px}
.uploads{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px;margin-top:12px}
.upload{background:rgba(255,255,255,0.02);padding:10px;border-radius:10px;display:flex;flex-direction:column;gap:8px}
.upload img{width:100%;height:140px;object-fit:cover;border-radius:8px}
.upload .desc{font-size:14px}

/* login modal */
.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;padding:16px}
.modal{background:var(--card);padding:18px;border-radius:12px;max-width:420px;width:100%}
label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
input[type=text],input[type=password],textarea{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
.btn{display:inline-block;padding:10px 14px;border-radius:8px;border:0;background:var(--accent);color:#012;cursor:pointer;font-weight:700}
.btn.danger{background:#ef4444;color:#fff}
.small{font-size:13px;color:var(--muted)}
.manage-list{display:grid;gap:10px;margin-top:10px}
.manage-row{display:flex;gap:10px;align-items:center;padding:8px;border-radius:8px;background:rgba(255,255,255,0.01)}
.manage-row img{width:84px;height:60px;object-fit:cover;border-radius:6px}

@media(max-width:880px){header{padding:10px} .uploads{grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}}

  </style>
</head>
<body>
  <header>
    <div class="brand">duggyffstore.com</div>
    <div style="position:relative">
      <div class="hamburger" id="hamburger" title="Menu">
        <div class="lines"><span></span><span></span><span></span></div>
      </div>
      <div class="menu-popup" id="menuPopup">
        <!-- When clicked show "ADMIN PAGE" label -->
        <a href="#" id="adminPageBtn">ADMIN PAGE</a>
      </div>
    </div>
  </header>  <main>
    <section class="card">
      <h2>Uploaded Accounts</h2>
      <p class="muted">ඔබට මෙහි පළකල accounts බලන්න පුළුවන්. Admin වන විට පමණක් upload/edit/delete කරගන්න පුළුවන්.</p>
      <div id="uploads" class="uploads"></div>
    </section><section class="card" style="margin-top:14px">
  <h3>Public Gallery</h3>
  <p class="muted">ඔබට gallery එකෙන් images හා account texts බලන්න, admin login කර upload කළ accounts ඒකේ දිස්වෙයි.</p>
  <div id="galleryList" class="uploads"></div>
</section>

  </main>  <!-- Login / Admin modal -->  <div class="modal-backdrop" id="modalBackdrop">
    <div class="modal" role="dialog">
      <h3>Admin Login</h3>
      <p class="small">Only admin can login. Wrong credentials will show: <strong>Only Can Login Admin</strong></p>
      <form id="loginForm">
        <label>Username</label>
        <input id="username" type="text" autocomplete="off" required>
        <label style="margin-top:8px">Password</label>
        <input id="password" type="password" autocomplete="off" required>
        <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
          <button class="btn" type="submit">Login</button>
          <button id="cancelLogin" type="button" class="btn" style="background:#334155;color:#fff">Cancel</button>
        </div>
      </form>
    </div>
  </div>  <!-- Admin Dashboard (shown after login) -->  <div id="adminPanel" style="display:none;position:fixed;right:18px;bottom:18px;z-index:1200;max-width:420px;width:100%">
    <div class="card">
      <h4>ADMIN PANEL</h4>
      <p class="small">Logged in as admin — upload new accounts (photo + text). Public gallery will update immediately.</p>
      <form id="uploadForm">
        <label>Photo</label>
        <input id="photoInput" type="file" accept="image/*" required>
        <label style="margin-top:8px">Account Text</label>
        <textarea id="acctText" rows="3" required></textarea>
        <div style="margin-top:8px;display:flex;gap:8px;align-items:center">
          <button class="btn" type="submit">Upload Account</button>
          <button id="logoutBtn" type="button" class="btn danger">Logout</button>
        </div>
      </form><h4 style="margin-top:12px">Manage Uploads</h4>
  <div id="manageList" class="manage-list"></div>
</div>

  </div>  <script>
    // === CONFIG ===
    const ADMIN_USER = 'dineth&1122@@';
    const ADMIN_PASS = 'dineth&1122@@';
    // NOTE: storage is localStorage (browser). To replicate across devices you'd need a server.
    // === END CONFIG ===

    // menu popup handling
    const hamburger = document.getElementById('hamburger');
    const popup = document.getElementById('menuPopup');
    hamburger.addEventListener('click', (e)=>{
      popup.style.display = popup.style.display === 'block' ? 'none' : 'block';
    });
    document.addEventListener('click', (e)=>{
      if(!hamburger.contains(e.target) && !popup.contains(e.target)) popup.style.display='none';
    });

    // ADMIN PAGE click -> open login modal
    document.getElementById('adminPageBtn').addEventListener('click', (e)=>{e.preventDefault(); openLogin(); popup.style.display='none';});

    // modal controls
    const modal = document.getElementById('modalBackdrop');
    function openLogin(){ modal.style.display='flex'; document.getElementById('username').focus(); }
    function closeLogin(){ modal.style.display='none'; }
    document.getElementById('cancelLogin').addEventListener('click', closeLogin);

    // storage helpers
    function loadUploads(){ try{ return JSON.parse(localStorage.getItem('dug_uploads')||'[]') }catch(e){return[]} }
    function saveUploads(a){ localStorage.setItem('dug_uploads', JSON.stringify(a)) }

    // render public gallery (main)
    function renderPublic(){ const gallery = document.getElementById('galleryList'); const uploads = document.getElementById('uploads');
      const arr = loadUploads();
      gallery.innerHTML=''; uploads.innerHTML='';
      if(!arr.length){ gallery.innerHTML='<div class="small muted">No accounts uploaded yet.</div>'; uploads.innerHTML=gallery.innerHTML; return }
      arr.slice().reverse().forEach((it,idx)=>{
        const card = document.createElement('div'); card.className='upload';
        const img = document.createElement('img'); img.src = it.photo; card.appendChild(img);
        const d = document.createElement('div'); d.className='desc'; d.innerText = it.text; card.appendChild(d);
        // clicking a public card opens a full-view modal with text and image
        card.addEventListener('click', ()=> openView(it));
        gallery.appendChild(card);

        // also in the top 'uploads' list simple cards
        const mini = card.cloneNode(true);
        uploads.appendChild(mini);
      })
    }

    // view modal for single upload (reuse modal)
    function openView(item){
      // create quick view overlay
      const overlay = document.createElement('div'); overlay.style.position='fixed'; overlay.style.inset=0; overlay.style.zIndex=2000; overlay.style.background='rgba(0,0,0,0.7)'; overlay.style.display='flex'; overlay.style.alignItems='center'; overlay.style.justifyContent='center';
      const box = document.createElement('div'); box.style.background='var(--card)'; box.style.padding='16px'; box.style.borderRadius='10px'; box.style.maxWidth='720px'; box.style.width='90%';
      const img = document.createElement('img'); img.src = item.photo; img.style.width='100%'; img.style.height='auto'; img.style.borderRadius='8px';
      const p = document.createElement('p'); p.style.marginTop='8px'; p.innerText = item.text;
      const close = document.createElement('button'); close.className='btn'; close.innerText='Close'; close.style.marginTop='10px'; close.onclick = ()=>document.body.removeChild(overlay);
      box.appendChild(img); box.appendChild(p); box.appendChild(close); overlay.appendChild(box); document.body.appendChild(overlay);
    }

    // initial render
    renderPublic();

    // login logic
    const loginForm = document.getElementById('loginForm');
    loginForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      const u = document.getElementById('username').value.trim();
      const p = document.getElementById('password').value;
      if(u===ADMIN_USER && p===ADMIN_PASS){
        sessionStorage.setItem('dug_admin','1');
        closeLogin(); showAdminPanel();
      } else {
        alert('Only Can Login Admin');
      }
    });

    // show admin panel
    function showAdminPanel(){ document.getElementById('adminPanel').style.display='block'; renderManage(); }
    function hideAdminPanel(){ document.getElementById('adminPanel').style.display='none'; }

    // if session already logged in show panel
    if(sessionStorage.getItem('dug_admin')==='1') showAdminPanel();

    // upload form
    const uploadForm = document.getElementById('uploadForm');
    uploadForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      if(sessionStorage.getItem('dug_admin')!=='1') return alert('Only admin can upload');
      const file = document.getElementById('photoInput').files[0];
      const text = document.getElementById('acctText').value.trim();
      if(!file || !text) return alert('Photo and text required');
      const reader = new FileReader(); reader.onload = ()=>{
        const arr = loadUploads(); arr.push({photo:reader.result,text}); saveUploads(arr); renderPublic(); renderManage(); uploadForm.reset(); alert('Uploaded successfully');
      }; reader.readAsDataURL(file);
    });

    // manage list render (admin-only)
    function renderManage(){ const cont = document.getElementById('manageList'); cont.innerHTML=''; const arr = loadUploads(); if(!arr.length){ cont.innerHTML='<div class="small muted">No uploads.</div>'; return }
      arr.slice().reverse().forEach((it,i)=>{
        const row = document.createElement('div'); row.className='manage-row';
        const img = document.createElement('img'); img.src=it.photo;
        const txt = document.createElement('div'); txt.style.flex='1'; txt.innerText = it.text;
        const del = document.createElement('button'); del.className='btn danger'; del.innerText='Delete';
        del.onclick = ()=>{ if(!confirm('Delete this upload?')) return; const full = loadUploads(); const idx = full.length-1-i; full.splice(idx,1); saveUploads(full); renderManage(); renderPublic(); }
        row.appendChild(img); row.appendChild(txt); row.appendChild(del); cont.appendChild(row);
      }) }

    // logout
    document.getElementById('logoutBtn').addEventListener('click', ()=>{ sessionStorage.removeItem('dug_admin'); hideAdminPanel(); alert('Logged out'); });

    // close modal on ESC
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeLogin(); });

    // clicking outside modal closes
    document.getElementById('modalBackdrop').addEventListener('click', (e)=>{ if(e.target===document.getElementById('modalBackdrop')) closeLogin(); });

    // small UX: clicking brand scrolls to top and close panels
    document.querySelector('.brand').addEventListener('click', ()=>{ window.scrollTo({top:0,behavior:'smooth'}); popup.style.display='none'; });

    // ensure public gallery updates on storage change (other tab)
    window.addEventListener('storage', ()=>{ renderPublic(); if(sessionStorage.getItem('dug_admin')==='1') renderManage(); });
  </script></body>
        </html>
